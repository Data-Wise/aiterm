project: aiterm
status: active
priority: P1
progress: 98
version: 0.7.0-dev
updated: 2026-01-17
next: StatusLine Phase 2 (remote session detection) OR Craft website enhancements

## Recent Work: StatusLine Phase 1 - Gateway Pattern (Jan 17, 2026) âœ…

**Status:** Merged to dev (PR #9)
**Branch:** feat/statusline-command-ux-improvements â†’ dev
**Merge Commit:** 63720deaf5e1809418bde981d020210a5248512f

### Phase 1: Gateway Pattern + Unified Menu + Hooks âœ… COMPLETE

**Problem Solved:** Configuration Paradox - 7 ways to configure statusline
**Solution:** Single entry point with progressive disclosure

**Deliverables:**
- âœ… `ait statusline setup` - Interactive 6-option gateway command
- âœ… `ait statusline customize` - Unified menu (Display/Theme/Spacing/Advanced)
- âœ… `ait statusline hooks` - Hook template management (3 templates)
- âœ… 50+ tests (31 hooks + 20+ CLI) - All passing
- âœ… Updated documentation with new commands

**Hook Templates (v2.1+):**
- `on-theme-change` (PostToolUse) - Auto-update colors on theme change
- `on-remote-session` (PreToolUse) - Enable remote indicator for /teleport
- `on-error` (PostToolUse) - Alert when statusline fails

**Files Changed:**
- src/aiterm/cli/statusline.py (+367 lines)
- src/aiterm/statusline/hooks.py (NEW, 352 lines)
- tests/test_statusline_hooks.py (NEW, 386 lines)
- tests/test_statusline_cli_gateway.py (NEW, 292 lines)
- docs/guide/statusline.md (+142 lines)
- BRAINSTORM & SPEC docs (+2,700 lines)

**Total:** 3,756 insertions, 10 files changed

**Backward Compatibility:** âœ… All existing commands still work

**Session Duration:** ~5 hours (analysis â†’ implementation â†’ testing â†’ docs â†’ merge)

---

## Planned: Website Documentation Enhancements (via Craft Plugin)

**Strategic Approach:** Build enhancements in craft plugin first, test on craft's docs, then apply to aiterm
**Spec:** docs/specs/SPEC-craft-website-enhancements-2025-12-31.md
**Brainstorm:** BRAINSTORM-website-enhancements-2025-12-31.md
**Craft Roadmap:** ~/projects/dev-tools/claude-plugins/craft/ROADMAP.md (v1.15.0)

**Phase 1 (Week 1):**
- [ ] Create `/craft:docs:website` command
- [ ] Implement ADHD scoring algorithm (0-100)
- [ ] Fix all mermaid syntax errors on aiterm docs
- [ ] Add TL;DR boxes to major pages
- [ ] Add time estimates to tutorials
- [ ] Create ADHD Quick Start page
- [ ] Target: ADHD score 62 â†’ 77 (+15 points)

**Phase 2-3:** See craft ROADMAP.md v1.15.0 for full details

**Impact:**
- Time-to-first-success: ~15 min â†’ < 5 min (70% reduction)
- Tutorial completion rate: Unknown â†’ > 70% target
- Mermaid errors: 5+ â†’ 0
- Mobile bounce rate: Unknown â†’ < 30% target

## Current Version: v0.7.0-dev (In Development)

**StatusLine Phase 1 (merged to dev):**
- âœ… Gateway command (`ait statusline setup`)
- âœ… Unified menu (`ait statusline customize`)
- âœ… Hook templates system (`ait statusline hooks`)
- âœ… 50+ new tests (all passing)
- âœ… Updated documentation

**Previous: v0.6.3 (Released Dec 31, 2025)**

**Major Features (Cumulative):**
- StatusLine command UX improvements (Phase 1 - NEW)
- Complete feature workflow with PR automation (`promote`, `release`)
- Workflow templates via `ait recipes` alias
- Feature branch commands (`ait feature status/start/cleanup/promote/release`)
- Release automation (PyPI, Homebrew, GitHub)
- Terminal-aware context switching (iTerm2/Ghostty auto-detect)
- Interactive tutorial system
- Ghostty support with 14 built-in themes

## v0.5.0: Release Automation (Phase 1 Complete)

**Status:** 7/7 commands implemented, 55 tests passing

| Command | Description | Status |
|---------|-------------|--------|
| `ait release check` | Pre-release validation | âœ… |
| `ait release status` | Show release state | âœ… |
| `ait release pypi` | Build and publish to PyPI | âœ… |
| `ait release homebrew` | Update Homebrew formula | âœ… |
| `ait release tag` | Create annotated git tag | âœ… |
| `ait release notes` | Generate release notes | âœ… |
| `ait release full` | Complete release workflow | âœ… |

**Remaining for v0.5.0:**
- [ ] Documentation update (commands reference already done)
- [ ] Version bump and release

## Test Suite

| Category | Tests |
|----------|-------|
| Total | 762+ |
| StatusLine (new Phase 1) | 50+ |
| Feature module | 25 |
| Release module | 55 |
| Other modules | 630+ |
| Coverage | 85%+ |

## Distribution

- **PyPI:** https://pypi.org/project/aiterm-dev/
- **Homebrew:** `brew install data-wise/tap/aiterm`
- **curl:** `curl -fsSL https://raw.githubusercontent.com/Data-Wise/aiterm/main/install.sh | bash`
- **Docs:** https://data-wise.github.io/aiterm/

## Recent Sessions

### Jan 17, 2026 - StatusLine Phase 1: Gateway Pattern & Hooks
- **Phase:** Command UX Improvements (v0.7.0)
- **Branch:** feat/statusline-command-ux-improvements (merged to dev)
- **Status:** âœ… Complete & merged to dev (PR #9)
- **Key Deliverables:**
  - `ait statusline setup` - Gateway command (6-option interactive menu)
  - `ait statusline customize` - Unified menu for display/theme/spacing/advanced
  - `ait statusline hooks` - Hook management (3 templates + CLI)
  - 50+ tests (31 hooks + 20+ CLI gateway tests)
  - Full documentation updates with examples
- **Files:** 10 files, 3,756 insertions
- **Testing:** 100% test pass rate (50+ tests)
- **Backward Compatibility:** âœ… All old commands still work
- **Session Duration:** ~5 hours
- **What's Next:** Phase 2 (remote session detection) or Craft website enhancements

**Problem Solved:**
- Configuration Paradox: 7+ confusing commands â†’ 1 clear entry point
- User Confusion: "Which command?" â†’ "Use `setup`"
- First-time Setup: 10+ min â†’ < 2 min

**Architecture Decision:**
- Implemented Gateway Pattern for progressive disclosure
- Unified menu consolidating all customization options
- Pre-built hook templates leveraging v2.1 features

---

### Dec 31, 2025 - StatusLine Spacing & Worktree Display
- **Phase 1:** Implemented configurable separator spacing
  - Added minimal/standard/relaxed spacing modes (1/2/3 spaces)
  - Changed default from 1â†’2 spaces for improved readability
  - Config option: `display.separator_spacing`
  - Commit: 159a615
- **Phase 2:** Implemented worktree display support
  - Shows ðŸŒ³N count when >1 worktree exists
  - Shows (wt) marker when in non-main worktree
  - Config option: `git.show_worktrees` (enabled by default)
  - Tested with real worktrees (4 total)
  - Commit: c55c462
- Created comprehensive brainstorm documents
  - BRAINSTORM-statusline-spacing-worktree-2025-12-31.md
  - STATUSLINE-SPACING-COMPARISON.md
- Updated documentation (32 config options, examples, visual comparisons)
- Session: ~2.5 hours
- Next: Test in live Claude Code session, prepare v0.7.0 release

### Dec 31, 2025 - v0.6.3 Feature Workflow Enhancements
- Implemented `ait feature promote` (create PR to dev)
- Implemented `ait feature release` (create PR from dev to main)
- Added `ait recipes` alias for workflow templates
- Fixed PyPI version verification bug (version-specific URL)
- Added 8 tests for promote/release commands (712 total)
- Updated feature workflow documentation
- Released v0.6.3 to PyPI, Homebrew, and GitHub Pages
- All automation workflows successful

### Dec 30, 2025 - v0.5.0 Release Commands
- Implemented all 7 release commands
- Added 55 tests for release module
- Updated docs/reference/commands.md
- Updated docs/REFCARD.md

### Dec 30, 2025 - v0.4.0 Release
- Feature workflow commands complete
- Terminal-aware switching
- Ghostty quick aliases
- v0.4.0 released to PyPI and Homebrew

## Key Files

| File | Purpose |
|------|---------|
| V0.5.0-PLAN.md | Release automation roadmap |
| CHANGELOG.md | Version history |
| IDEAS.md | Feature brainstorm |
| CLAUDE.md | Project guidance for Claude |

## Links

- **Repo:** https://github.com/Data-Wise/aiterm
- **Docs:** https://data-wise.github.io/aiterm/
- **Homebrew Tap:** https://github.com/Data-Wise/homebrew-tap
